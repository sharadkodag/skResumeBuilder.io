<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        var gender = null;
        function onBack(){
            window.open("./index.html", "_self");
        }
        var exp = 0;
        function addExp(){
            var div = document.createElement('div');
            div.setAttribute('id', 'exp' + ++exp);
            div.style.marginBottom = '1rem';
            console.log(div.id);
            var input = document.createElement('input');
            input.setAttribute('class', 'expVal');
            input.style.width = '80%';
            input.style.height = '2rem';
            var removeBtn = document.createElement('button');
            removeBtn.textContent = 'Remove'
            removeBtn.style.height = '2rem';
            removeBtn.style.width = '18%';
            removeBtn.style.marginLeft = '5px';
            removeBtn.setAttribute('type', "button");
            removeBtn.setAttribute('id', 'exp' + exp);
            div.appendChild(input);
            div.appendChild(removeBtn);
            document.getElementById('expBlock').appendChild(div);
            removeBtn.addEventListener('click', function(e){
                var target = e.target || e.srcElement;
                console.log(target);
                var text = target.id;  
                document.getElementById(text).remove();
            });
        }

        var edu = 0;
        function addEdu(){
            var div = document.createElement('div');
            div.setAttribute('id', 'edu' + ++edu);
            div.style.marginBottom = '1rem';
            console.log(div.id);
            var input = document.createElement('input');
            input.setAttribute('class', 'edu eduVal');
            input.style.width = '80%';
            input.style.height = '2rem';
            var removeBtn = document.createElement('button');
            removeBtn.textContent = 'Remove'
            removeBtn.style.height = '2rem';
            removeBtn.style.width = '18%';
            removeBtn.style.marginLeft = '5px';
            removeBtn.setAttribute('type', "button");
            removeBtn.setAttribute('class', 'edu' + edu);
            div.appendChild(input);
            div.appendChild(removeBtn);
            document.getElementById('eduBlock').appendChild(div);
            removeBtn.addEventListener('click', function(e){
                var target = e.target || e.srcElement;
                console.log(target);
                var text = target.className;  
                document.getElementById(text).remove();
            });
        }

        var skill = 0;
        function addSkill(){
            var div = document.createElement('div');
            div.setAttribute('id', 'skill' + ++skill);
            div.style.marginBottom = '1rem';
            console.log(div.id);
            var input = document.createElement('input');
            input.setAttribute('class', 'skill skillVal');
            input.style.width = '80%';
            input.style.height = '2rem';
            var removeBtn = document.createElement('button');
            removeBtn.textContent = 'Remove'
            removeBtn.style.height = '2rem';
            removeBtn.style.width = '18%';
            removeBtn.style.marginLeft = '5px';
            removeBtn.setAttribute('type', "button");
            removeBtn.setAttribute('id', 'skill' + skill);
            div.appendChild(input);
            div.appendChild(removeBtn);
            document.getElementById('skillBlock').appendChild(div);
            removeBtn.addEventListener('click', function(e){
                var target = e.target || e.srcElement;
                console.log(target);
                var text = target.id;  
                document.getElementById(text).remove();
            });
        }

        function onSubmitForm(){
            if(validateForm())
            {
                var list = document.querySelectorAll('exp');
                console.log(typeof list);
                localStorage.setItem("name", document.getElementById('name').value);
                localStorage.setItem("address", document.getElementById('address').value);
                localStorage.setItem("edu", document.getElementById('edu').value);
                localStorage.setItem("email", document.getElementById('email').value);
                localStorage.setItem("contact", document.getElementById('contact').value);
                localStorage.setItem("exp", document.getElementById('exp').value);
                localStorage.setItem("objective", document.getElementById('objective').value);
                localStorage.setItem("declaration", document.getElementById('declaration').value);
                localStorage.setItem("skill", document.getElementById('skill').value);
                localStorage.setItem("gender", gender);
                localStorage.setItem("dob", document.getElementById('dob').value);
                localStorage.setItem("nationality", document.getElementById('nationality').value);
                localStorage.setItem("lang", document.getElementById('lang').value);
                localStorage.setItem("marital", document.getElementById('marital').value);
                
                console.log(document.querySelector('.expVal'));
                var expList = document.querySelectorAll('.expVal');
                var expList2 = [];
                for(let i=0; i < expList.length; i++){
                    expList2[i] = expList[i].value;
                }
                console.log(expList2.length);
                localStorage.setItem("exp1", expList2);

                var skillList = document.querySelectorAll('.skillVal');
                var skillList2 = [];
                for(let i=0; i < skillList.length; i++){
                    skillList2[i] = skillList[i].value;
                }
                console.log(skillList2.length);
                localStorage.setItem("skill1", skillList2);

                var eduList = document.querySelectorAll('.eduVal');
                var eduList2 = [];
                for(let i=0; i < eduList.length; i++){
                    eduList2[i] = eduList[i].value;
                }
                console.log(eduList2.length);
                localStorage.setItem("edu1", eduList2);

                window.open("./cv.html", "_self");
            }
        }

        function validateForm(){
            var address = document.forms["form"]["address"].value;
            if(document.getElementById('gen1').checked){
                gender = document.getElementById('gen1').value
            }else if(document.getElementById('gen2').checked){
                gender = document.getElementById('gen2').value
            }
            console.log(gender);
            var contact = document.forms['form']['contact'].value;
            var name = document.forms['form']['name'].value;
            var edu = document.forms['form']['edu'].value;
            var email = document.forms['form']['email'].value;
            var objective = document.forms['form']['objective'].value;
            var declaration = document.forms['form']['declaration'].value;
            var lang = document.forms['form']['lang'].value;
            var dob = document.forms['form']['dob'].value;
            return address != "" && gender != null && contact != "" && name != "" && edu != "" && email != ""
            && objective != "" && declaration != "" && lang != "" && dob != "";
        }
    </script>
    <style>
        .cvInput{
            width: 100%;
            display: block;
            height: 2rem;
        }
        .inputBlock{
            margin: 1rem;
        }
    </style>
</head>
<body>
    <button onclick="onBack()" style="border-radius: 50%;">&laquo;</button>
    <h1 style="text-align: center; background-image: linear-gradient(to right, rgba(255, 0,0,0), rgb(255, 140, 0), rgba(255, 0,0,0));
    color: white; height: 3rem;">Fill your details</h1>
    <form name="form" onsubmit="return false">
        <div style="display: flex;">
            <div id="col1" style="flex: 1;">
                <div class="inputBlock">
                    <label>Objective</label>
                    <input required id="objective" type="text" class="cvInput" value="A challenging position that will utilize my extensive technical skill and will lead me to innovative work 
                    environment and help me to achieve personal as well as organizational goals.">
                </div>
                <div class="inputBlock">
                    <label>Address</label>
                    <input required id="address" type="text" class="cvInput">
                </div>
                <div class="inputBlock">
                    <label>Contact Number</label>
                    <input required id="contact" type="text" class="cvInput">
                </div>
                <div class="inputBlock">
                    <label>Date of birth</label>
                    <input required id="dob" type="date" class="cvInput">
                </div>
                <div class="inputBlock">
                    <label>Nationality</label>
                    <select name="" id="nationality" class="cvInput">
                        <option value="Indian">Indian</option>
                        <option value="Other citizen">Other citizen</option>
                    </select>
                </div>
                <div id="expBlock" class="inputBlock">
                    <label>Experience</label>
                    <div style="align-items: center; justify-items: center;">
                        <textarea id="exp" type="text" class="cvInput expVal"></textarea>
                        <button type="button" onclick="addExp()">&#10133;</button>
                    </div>
                </div>
                <div class="inputBlock">
                    <label>Known languages</label>
                    <input required id="lang" type="text" class="cvInput">
                </div>
            </div>
            <div id="col2" style="flex: 1;">
                <div class="inputBlock">
                    <label>Name</label>
                    <input required id="name" type="text" class="cvInput">
                </div>
                <div class="inputBlock">
                    <label>Email address</label>
                    <input required id="email" type="text" class="cvInput">
                </div>
                <div class="inputBlock">
                    <label style="display: block;">Gender</label>
                    <div class="cvInput">
                        <br>
                        Male <input type="radio" name="gen" id="gen1" value="Male">
                        Female <input required type="radio" name="gen" id="gen2" value="Female">
                    </div>
                </div>
                <div class="inputBlock">
                    <label>Marital stauts</label>
                    <select name="" id="marital" class="cvInput">
                        <option value="Single">Single</option>
                        <option value="Married">Married</option>
                        <option value="Divorced">Divorced</option>
                    </select>
                </div>
                <div id="skillBlock" class="inputBlock">
                    <label>Skill</label>
                    <textarea id="skill" type="text" class="cvInput skillVal"></textarea>
                    <button type="button" onclick="addSkill()">&#10133;</button>
                </div>
                <div id="eduBlock" class="inputBlock">
                    <label>Education details</label>
                    <textarea required id="edu" type="text" class="cvInput eduVal"></textarea>
                    <button type="button" onclick="addEdu()">&#10133;</button>
                </div>
                
                <div class="inputBlock">
                    <label>Declaration</label>
                    <textarea required id="declaration" type="text" class="cvInput">I hereby declare that all the information said above is true to the best of my knowledge and 
                        belief</textarea>
                    <!-- <input id="declaration" type="text" class="cvInput" value="I hereby declare that all the information said above is true to the best of my knowledge and belief"> -->
                </div>
            </div>
        </div>
        <br>
        <br>
        <button type="submit" style="margin: auto; display: block; width: 20rem; height: 2rem; font-size: larger; 
        background-color: green; color: white; border-radius: 10rem;" onclick="onSubmitForm()">Submit</button>
    </form>
</body>
</html>
